# nvim-surround - 文本环绕操作

nvim-surround 是一个强大的文本环绕操作插件，可以快速添加、删除和替换文本周围的符号（如引号、括号等）。

## 安装方式

```lua
{
  "kylechui/nvim-surround",
  keys = {
    { "<leader>sa", "ys", mode = "n", silent = true, desc = "Add surround (ys)", noremap = false },
    { "<leader>sd", "ds", mode = "n", silent = true, desc = "Delete surround (ds)", noremap = false },
    { "<leader>sr", "cs", mode = "n", silent = true, desc = "Replace surround (cs)", noremap = false },
  },
}
```

## 快捷键一览表

| 按键 | 作用 | 备注 |
|------|------|------|
| `<leader>sa` | 添加环绕 (ys) | 提示使用 ys 操作符 |
| `<leader>sd` | 删除环绕 (ds) | 提示使用 ds 操作符 |
| `<leader>sr` | 替换环绕 (cs) | 提示使用 cs 操作符 |
| `ys` | 添加环绕 | 操作符模式 |
| `ds` | 删除环绕 | 操作符模式 |
| `cs` | 替换环绕 | 操作符模式 |

## 常用命令/用法

1. **添加环绕**：`ys` + 文本对象 + 符号
   - `ysiw"` - 给当前单词添加双引号
   - `ys$"` - 给到行尾添加双引号
   - `yss"` - 给整行添加双引号

2. **删除环绕**：`ds` + 符号
   - `ds"` - 删除双引号
   - `ds(` - 删除括号
   - `ds{` - 删除花括号

3. **替换环绕**：`cs` + 旧符号 + 新符号
   - `cs"'` - 将双引号替换为单引号
   - `cs({` - 将括号替换为花括号
   - `cs"<q>` - 将引号替换为 HTML 标签

4. **可视模式**：在可视模式下使用 `S` + 符号
5. **插入模式**：`<C-g>s` + 符号

## 支持的符号

- **引号**：`"`, `'`, `` ` ``
- **括号**：`(`, `)`, `[`, `]`, `{`, `}`
- **HTML 标签**：`<tag>`, `</tag>`
- **自定义符号**：可以配置自定义符号

## 与现有插件的配合/注意事项

- **与 Treesitter 配合**：支持 Treesitter 文本对象
- **与 mini.ai 配合**：增强文本对象识别
- **操作符模式**：遵循 Vim 的操作符模式
- **可视模式支持**：在可视模式下也能使用
- **插入模式支持**：在插入模式下快速添加环绕

## 配置说明

- **默认键位**：保持 Vim 传统键位
- **可视模式**：`S` 键用于可视模式
- **插入模式**：`<C-g>s` 用于插入模式
- **文本对象**：支持所有标准文本对象

## 故障排查

### 常见报错与解决

1. **操作符不生效**
   - 检查是否在正确的模式下使用
   - 确认文本对象选择正确
   - 查看 `:verbose map ys` 确认映射状态

2. **符号不支持**
   - 检查符号是否在支持列表中
   - 尝试使用转义字符
   - 查看插件文档了解支持的符号

3. **可视模式问题**
   - 确保在可视模式下使用 `S`
   - 检查是否有其他插件冲突
   - 尝试重新加载配置
